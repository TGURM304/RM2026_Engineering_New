clear;
clc;
%各关节质量
m=[1.143 0.777 1.82 0.596 0.471 0.376];
a2  =  0.350;
a3  = -0.090;
d2  =  0.0227;
d4  =  0.22571;
e   =  1e-9;
%机器人工具箱建立机器人模型
%          thetai       di      ai-1     alphai-1
L1 = Link([0            0       0         0     ],'modified');
L2 = Link([0            d2      0         pi/2  ],'modified');
L3 = Link([0            0       a2        0     ],'modified');L3.offset = pi/2;
L4 = Link([0            d4      a3        pi/2  ],'modified');
L5 = Link([0            0       0        -pi/2  ],'modified');
L6 = Link([0            0       0         pi/2  ],'modified');

L1.Jm = 0; L2.Jm = 0; L3.Jm = 0; L4.Jm = 0; L5.Jm = 0; L6.Jm = 0;
L1.m = m(1); L2.m = m(2); L3.m = m(3);
L4.m = m(4); L5.m = m(5); L6.m = m(6);
% L1.r = 
L1.I = [2929412 21896 22349; 21896 3326646 53289; 22349 53289 1922344] * e;
L2.I = [379480 -174 127079; -174 17864293 -15; 127079 -15 18071288] * e;
L3.I = [3787022 320615 -646029; 320615 5019218 -217418; -646029 -217418 6405916] * e;
L4.I = [1833108 -211 -795; -211 1746121 -31949; -795 -31949 795712] * e;
L5.I = [1066176 15431 6961; 15431 334383 11307; 6961 11307 1051975] * e;
L6.I = [772509 -13949 290; -13949 511879 -468; 290 -468 429308] * e;
% 质心位置1000
p10 = [0.00058;0.00711;0.04869];p21 = [0.185;0;-0.0051]; p32 = [-0.0019; 0.0018; -0.0011];
p43 = [0.0035;0.005;0.048]; p54 = [-0.0013;-0.0017;-0.0025];  
p65 = [0.00001; 0.00018;0.0456];
L1.r = p10; L2.r = p21; L3.r = p32;
L4.r = p43; L5.r = p54; L6.r = p65;
 
robot = SerialLink([L1, L2, L3, L4, L5, L6]); 
robot.name='My_Robot';
theta = [50.2,40.5,112.17,40.12,56.21,70.7]*pi/180;
qd = [0 1 0 1 0 0]; qdd = [0 0 0 1 0 0];
tau_N = NewtonEuler(theta*180/pi, qd', qdd', m, a2, a3, d2, d4);
tau = robot.rne(theta, qd, qdd, [0 0 9.8]);
[tau_N;tau]

robot.teach;